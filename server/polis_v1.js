// TODO make different logger
// TODO remove articles from here
// TODO decide on timestamp/id/hash precision
// TODO add a conversationID

var articles = {
    nuclearMullah_article: "" + 
"        Nuclear Mullahs" +
"        By BILL KELLER" +
"        IRAN has returned to the front pages after a summer hiatus. Negotiations aimed at preventing the dreaded Persian Bomb have resumed their desultory course. Iran, although suffering from the international sanctions choreographed by the Obama administration, keeps adding new arrays of centrifuges while insisting the program is strictly nonmilitary. Israel is — or maybe isn’t — edging closer to a unilateral strike. The U.S., we learn from The Times’s reliable David Sanger, is considering more and bigger bouts of cybersabotage. Meanwhile, the mullahs are shipping arms to their embattled fellow despots in Syria." +
"" +
"        This strikes me as a good time to address an unnerving question that confronts any concerned student of this subject: Can we live with a nuclear Iran? Given a choice of raining bunker-busting munitions on Iran’s underground enrichment facilities, or, alternatively, containing a nuclear-armed Iran with the sobering threat of annihilation, which is the less bad option? As the slogan goes in Israel: “Bomb? Or The Bomb?\"" +
"        The prevailing view now is that a nuclear Iran cannot be safely contained. On this point both President Obama and Mitt Romney agree. They can hardly say otherwise; to even hint that a nuclear Iran is acceptable would undermine the efforts aimed at preventing that outcome. But I tend to think they mean it." +
"" +
"        However, there are serious, thoughtful people who are willing to contemplate a nuclear Iran, kept in check by the time-tested assurance of retaliatory destruction. If the U.S. arsenal deterred the Soviet Union for decades of cold war and now keeps North Korea’s nukes in their silos, if India and Pakistan have kept each other in a nuclear stalemate, why would Iran not be similarly deterred by the certainty that using nuclear weapons would bring a hellish reprisal?" +
"" +
"        Anyone who has a glib answer to this problem isn’t taking the subject seriously. Personally, I’ve tended to duck it, taking refuge in the hope that the tightening vise of international pressure — and a few cyberattacks — would make Iran relent and spare us the hard choice. But that could be wishful thinking. So I’ve spent some time reading and questioning, trying to report my way to an opinion." +
"        Let’s assume, for starters, that Iran’s theocrats are determined to acquire nuclear weapons. Western analysts say there is no evidence yet that the supreme leader has made that decision. But if you ruled a country surrounded by unfriendly neighbors — Persians among the Arabs, Shiites among the Sunnis — a country with a grand sense of self-esteem, a tendency to paranoia and five nuclear powers nearby, wouldn’t you want the security of your own nuclear arsenal?" +
"" +
"        Let’s assume further that diplomacy, sanctions and computer viruses may not dissuade the regime from its nuclear ambitions. So far, these measures seem to have slowed the nuclear program and bought some time, but Iran’s stockpiles of enriched fuel have grown in size and concentration despite everything a disapproving world has thrown at them so far. So, then what?" +
"" +
"        A pre-emptive bombing campaign against Iran’s uranium factories would almost certainly require major U.S. participation to be effective, and would not be neat. Beyond the immediate casualties, it would carry grave costs: outraged Iranians rallying behind this regime that is now deservedly unpopular; Iran or its surrogates lashing out against American and Israeli targets in a long-term, low-intensity campaign of retaliation; a scorching hatred of America on the newly empowered Arab street, generating new recruits for Al Qaeda and its ilk; an untimely oil shock to a fragile world economy; an unraveling of the united front Obama has assembled to isolate Iran. All that, and a redoubled determination by Iran’s leaders to do the one thing that would prevent a future attack: rebuild the nuclear assembly line, only this time faster and deeper underground. There is a pretty broad consensus that, short of a full-scale invasion and occupation of Iran, a preventive attack would not end the nuclear program, only postpone it for a few years." +
"" +
"        Now imagine that Iran succeeds in making its way into the nuclear club." +
"" +
"        Despite the incendiary rhetoric, it is hard to believe the aim of an Iranian nuclear program is the extermination of Israel. The regime in Iran is brutal, mendacious and meddlesome, and given to spraying gobbets of Hitleresque bile at the Jewish state. But Israel is a nuclear power, backed by a bigger nuclear power. Before an Iranian mushroom cloud had bloomed to its full height over Tel Aviv, a flock of reciprocal nukes would be on the way to incinerate Iran. Iran may encourage fanatic chumps to carry out suicide missions, but there is not the slightest reason to believe the mullahs themselves are suicidal." +
"" +
"        The more common arguments against tolerating a nuclear Iran are these:" +
"" +
"        First, that possession of a nuclear shield would embolden Iran to step up its interference in the region, either directly or through surrogates like Hezbollah. This is probably true. But as James Dobbins, a former diplomat who heads security studies for the RAND Corporation, told me, the subversive menace of a nuclear Iran has to be weighed against the lethal rage of an Iran that had been the victim of an unprovoked attack." +
"        A second worry is that a Persian Bomb would set off a regional nuclear arms race. This is probably an exaggerated fear. A nuclear program is not cheap or easy. In other parts of the world, the proliferation virus has not been as contagious as you might have feared. So the Saudis, who regard Iran as a viper state, might be tempted buy a bomb from Pakistan, which is not a pleasant thought. But Egypt (broke), Turkey (a NATO member) and the others have strong reasons not to join the race." +
"" +
"        Most worrisome, I think, is the danger that a crisis between Israel and Iran would escalate out of control. Given the history of mistrust and the absence of communication, some war planner on one side or the other might guess that a nuclear attack was imminent, and decide to go first." +
"        “You would have a very unstable deterrent environment between Israel and Iran, simply because these are two states that tend to view each other in existential terms,\" said Ray Takeyh, an Iranian-American Middle East scholar at the Council on Foreign Relations, who is not an advocate of containment. Against this fear, history suggests that nuclear weapons make even aggressive countries more cautious. Before their first nuclear tests, India and Pakistan fought three serious conventional wars. Since getting their nukes they have bristled at each other across a long, heavily armed border, but no dispute has risen to an outright war." +
"" +
"        At the end of this theoretical exercise, we have two awful choices with unpredictable consequences. After immersing myself in the expert thinking on both sides, I think that, forced to choose, I would swallow hard and take the risks of a nuclear Iran over the gamble of a pre-emptive war. My view may be colored by a bit of post-Iraq syndrome." +
"" +
"        What statesmen do when faced with bad options is create new ones. The third choice in this case is to negotiate a deal that lets Iran enrich uranium for civilian use (as it is entitled to do under the Nuclear Nonproliferation Treaty), that applies rigorous safeguards (because Iran cheats), that gradually relaxes sanctions and brings this wayward country into the community of more-or-less civilized nations. That, of course, won’t happen before November. Any U.S. concession now would be decried by Republicans as an abandonment of Israel and a reward to a government that recently beat a democracy movement bloody. We can only hope that after the election we get some braver, more creative diplomacy, either from a liberated Obama or (hope springs eternal) a President Romney who has a Nixon-to-China moment. Because a frank look at the alternatives of (a) pre-emptive war and (b) a nuclear Iran should be enough to focus all of our intelligence and energy on (c) none of the above.",


nuclearMullah_comments: [

        {userID: 1, id: 1001, text: "Would Iran really launch such a weapon? Wrap your mind around these words delivered by Iranian President Mahmoud Ahmadinejad on Israel\'s milestone, 60th birthday in 2008: \"Those who think they can revive the stinking corpse of the usurping and fake Israeli regime by throwing a birthday party are seriously mistaken. Today, the reason for the Zionist regime\'s existence is questioned, and this regime is on its way to annihilation. They should know that regional nations hate this fake and criminal regime and if the smallest and briefest chance is given to regional nations they will destroy it.\" Some weeks ago Ahmadinejad reaffirmed his intentions in a televised speech he gave in Teheran marking Quds Day, the annual protest against the Jewish presence in Jerusalem which is held on the last Friday of Ramadan.  He said, \"The nations of the region will soon finish off the usurper Zionists [Israel] in the Palestinian land. A new Middle East will definitely be formed. With the grace of God and help of the nations, in the new Middle East there will be no trace of the Americans and Zionists.\" Tell us who are those western expert that are not convinced this regime hasn\'t made the decision to build the bomb?",},

        {userID: 2, id: 1002, text: "Bill Keller says the mullahs are rational, which suggests we should trust them when they have nukes. But was it rational to sacrifice a generation of young boys during the Iran-Iraq war by having them repeatedly cross mine fields as human detectors forced to march ahead of Iran\'s military? is it rational to send agents half way across the globe to places like Buenos Aires to blow up Jews? Is it rational for an observer sitting in New York to believe, on the one hand, that the mullahs are truthful when they say their nuclear program is only for peaceful purposes, but that it is hard to believe, on the other hand, that they mean what they say when characterizing Israel as a cancer that must be eliminated? Wordsmith Bill Keller must have intended to use the word \"rationalize\" rather than \"rational\" to explain how desperate many are to accommodate a nuclear Iran. That\'s a lot easier to do sitting in New York rather than Jerusalem, Riyadh, Baku and other capitals in Tehran\'s neighborhood.",},

        {userID: 3, id: 1003, text: "Great piece. In the meantime, though, Israel is ratcheting up the hysteria. My fear is an October surprise that goes like this: Netanyahu (maybe inspired by Sheldon Adelson?) attacks Iran, insisting that the US come to Israel\'s aid. Obama is forced to do so against his better judgment under intense pressure from the uncritically pro-Israel crowd. Romney and the republicans jump all over Obama for not being aggressive enough, right-wing evangelicals are delirious, liberals and the war-weary in general are appalled that Obama has caved, and R & R end up winning the election.  Please, somebody, tell me this can\'t happen.",},

        {userID: 4, id: 1004, text: "Mr. Keller has presented a thoughtful, logical argument that a world living with a nuclear-armed Iran would be better than one after a pre-emptive U.S. and/or Israeli strike to take out Iran\'s nuclear capability. In fact, I think he has weakened, if not demolished, the alarmist cries from some Israelis and some Americans that a nuclear Iran is, ipso facto, unacceptable because it would lead inevitably to Israel\'s annihilation and an Iran on the rampage in support of radical Islam. The first assumption is far from the given that that some make it out to be, but the second would undoubtedly be the consequence of a pre-emptive strike--and Iran would occupy the moral high ground.  The other \"given\" is that a military attack, whatever its initial success, would not by any means put an end to Iran\'s nuclear ambitions. All the above is the reason that some of Mr. Keller\'s strongest allies in arguing against an Israeli strike are current and former leaders of Israel\'s security and intelligence establishment. They have become Prime Minister Netanyahu\'s strongest critics. Why America\'s media continue to ignore that Israeli consensus escapes me.",},

        {userID: 5, id: 1005, text: "Hmmm ... I wonder if Mr. Keller is related to John Boehner or Harry Reid? I ask because his \'solution\' appears to be simply to kick the can down the road. Any serious student of history understands that to be the most dangerous alternative as it abandons control of events to the winds of fate. Mr. Keller\'s analysis of the distastefulness of the available alternatives is spot-on but that does not suggest that treading water is a better choice. That course is likely to result in fewer alternatives and far more limited maneuvering room when can-kicking is no longer possible and all of the initiative rests with Iran.",},

        {userID: 6, id: 1006, text: "What is most disconcerting (and saddening) about most of these commentaries is the ease with which many people assume that Iran is a rational entity with rational leadership and that Israel, not anyone else, must take the existential leap of faith that the assumption of Iran\'s rationality is true. If such assumption is proven false, do those who made it say \"Oops. Our bad. Sorry about that.\"?  Or, to put it another way, how many people (or peoples)have faced an existential threat to their (its) existence, twice within recent memory, more often within history?",},

        {userID: 7, id: 1007, text: "Anyone who champions any type of preemptive strike and subsequent occupation of Iran must either themselves sign up for some branch of the military or offer their own children. It is easy to talk about the prospect of war on some distant battlefield but the actual horror of war should never be underestimated and putting \"boots on the ground\" should be the absolute LAST choice available. Its always funny to see that those with the least connection to actual fighting are always the first ones to suggest starting a war.",},
        
        {userID: 8, id: 1008, text: "At last, some common sense on this issue. I have never understood all of the fear-mongering about a nuclear Iran. There seems to be a general assumption that the lunacy among Iran\'s rulers, combined with nuclear weapons, would lead to disaster all around, particularly for Israel. But the Iranians have shown themselves to be calculating, rational, opponents. Any use of nuclear weapons on their part would lead to the destruction of Iran in retaliation. The idea that they would ignore these consequences and pursue mutual destruction anyway is a weak one. On the other hand, a preemptive strike at Iran would drag the US into a prolonged war, both overt and covert. We played the waiting game with the Soviet Union for many years, and it proved to be the right choice. I hope the leaders of the US and Israel make the right choice this time as well.",},
        
        {userID: 9, id: 1009, text: "I suspect that you are correct in your analysis. The fact is that Iran\'s logic for seeking nuclear capabilities is not that different from what drove Israel\'s ambitions. Iran views itself as surrounded by adversaries, several of whom have nuclear weapons, and so sees a vital need to have the same capability. Frankly, I do not see how we can prevent this. Delay it, yes, but prevention would involve destroying capabilities on the ground, which means war. No country has ever used nuclear weapons against a country capable of retaliating. We were certainly not thrilled to see such weapons in the hands of the Soviets, but we learned to live with the bomb. I would expect the same to be true for Iran. So while a despotic regime with nuclear capabilities is hardly ideal, we have successfully lived with this situation for decades. And attacking Iran will only delay the fall of the current regime which is really the overarching concern. Despotic regimes are ultimately unsustainable. In the modern era, they appear to last around 70-80 years at best (which leaves the mullahs another couple of decades). So it seems to me that our choices are: a) total war for regime change now (think how well Iraq worked out), b) limited war that turns the Iranian people against us and bolsters the mullahs, or c) containment until the day the Iranian people take destiny into their own hands. Seems pretty much a no-brainer.",},
        
        {userID: 10, id: 1010, text: "Politicians\' bluster that \"Iran will never have nuclear capability\" is obligatory tough-guy talk for domestic consumption -- a fake issue pumped to the max for political and K-Street advantage. More than 30 countries, including Japan, although they do not possess nuclear weapons possess \"nuclear capability\" -- the ability to produce a bomb in a weekend. This is just another example of bipartisan fear-mongering to: further the surveillance state, destabilize international relations to support imperial aims, withdraw support for necessary domestic programs and waste more money on the military. Sabre rattling at Iran also bolsters right-wing Israeli intransigence with respect to Palestinian/Israeli relations.",},
        
        {userID: 11, id: 1011, text: "Even asking this question risks howls of outrage. But you still do not ask the other question, even more vital: what should we offer in negotiations to avoid a bomb? We have offered nothing. We are not negotiating. We are demanding. We are threatening. We are attacking: economic with sanctions, cyber war with worms, and overt war with terrorist attacks. We are not actually doing the negotiation you presume.  We what could we, should we offer? What does Iran want, other than a bomb? We have never even discussed that. In fact, when talks were inevitable in this last round, the Israelis demanded assurances that nothing would be offered, and they were given those assurances. After each round our \"negotiator\" went first to Israel to report before coming home to report.  Because of Israeli objections, all offers that had been hinted were left unmade. Israel demands we fight a war for them. They won\'t have negotiations.  The choice is not just bomb or bombing. There is also negotiation, and we haven\'t tried it yet.",},
        
        {userID: 12, id: 1012, text: "Mr. Keller, I agree. What the United States should be seeking, and what President Obama has explicitly stated as his goal, is a nuclear-free world. This means that along with demanding that Iran not develop a nuclear weapons capability, we should be demanding that Israel and Pakistan destroy their nuclear weapons. But should Iran build a nuclear bomb, it would not be the end of the world. It is not worth my son\'s life, or the life of any mother\'s son or daughter, to prevent this from happening.",},
        
        {userID: 13, id: 1013, text: "Finally! A sane look at the problem! The Mullas may be mad, but they are not suicidal! Besides, after enabling Israel to go nuclear, the West has no legitimacy in its stand against Iran. I hope the powers that be pay close heed to these arguments and not involve us in yet another costly and useless war. The war mongers and the war profiteers of course will raise a hue and cry, but that\'s what they always do.",},
        
        {userID: 14, id: 1014, text: "Containing a nuclear Iran will be no more difficult and probably far less a real issue than containing a nuclear Pakistan which the west has been doing for a generation. The Pakistani government is as volatile and the population far more anti-US than Iran. I have family in Iran and have regular contact. The Iranian people are as afraid of nukes as any one else.  The Iranian government has no more desire to use nukes on its neighbors than the Israelis or the Pakistanis. They know that it is not the use of the weapons, but the possession of them that gives them the deterrent status and negotiation handle. Their involvement in the Syrian conflict, having 2 million Afghan refugees inside their own border, and their being the lead Shiite nation in the region makes then a natural target for all the Sunni Arab states which are far different than the Persians in culture, language and, more importantly, in military might. Iran\' government is also far more under the influence of Russia and China even though the vast majority of their young population is favorable towards the west and the US. But that would end in a blink if the US strikes at their nuclear facilities.",},

        {userID: 15, id: 1015, text: "Kudos to Bill Keller for his superb analysis of the ramifications if Iran acquires nuclear weapons. As he points out, given Israel’s enormous military superiority, an Iranian bomb would likely not be a threat to Israel’s national security. The slightest indication that Iran intended to use the bomb would trigger an instant and devastating Israeli pre-emptive attack. The downside of a military attack is overwhelming. A military assault would most certainly drag America into the conflict. Iranian — and regional — reaction would be catastrophic for American and Western interests. Iran would unquestionably launch a multifront military and terrorist reaction. American lives would most surely be endangered worldwide. Finally, most military strategists agree that even a prolonged air campaign would set the Iranian program back by only a few years. Mr. Keller deserves our gratitude for heroically standing up to the unrelenting beating of war drums by the Israeli leadership. BRUCE van VOORST  is former senior national security correspondent for Time magazine.",},
        
        {userID: 16, id: 1016, text: "Bill Keller’s analysis of containing a nuclear-armed Iran suffers from a glaring omission: He did not address the possibility that an Iranian nuke might fall into terrorists’ hands. The Iranian regime could deliberately arm a terrorist cell, or terrorists could exploit Iran’s inferior security infrastructure to steal a weapon, or an unstable future Iran could collapse, leaving its stockpile vulnerable. How, then, would the United States know where to direct its “flock of reciprocal nukes\" before the mushroom cloud swallowed Tel Aviv, or Manhattan? Even if the detonated bomb could be traced to Iran, the damage would be done. The potential destruction of another state will not deter a rogue group, let alone one of eager would-be martyrs. We also mustn’t forget that while America stakes its military strategy on such an optimistic gamble, Israel stakes its existence.",},
        
        {userID: 17, id: 1017, text: "Bill Keller makes a compelling case that it is better to tolerate a nuclear Iran than endure all the horrific consequences that a military strike would produce. He assures us that Iran is not likely to launch a nuclear attack against Israel, knowing that it would be suicidal, and that its threats to wipe Israel off the map are just words. Mr. Keller may be correct, but what if he is mistaken? How can Israeli leaders who are even 90 percent certain that deterrence will work allow their citizens to be subject to a second Holocaust, knowing that this time the Jewish people have the means to stop it? In a nuclear Iran, accidents, miscalculations, unauthorized launchings or the dying gasps of a beleaguered regime could each mean the end of Israel. Maybe Mr. Keller is right that the prudent course for Israel (and the United States) is to allow Iran to acquire nuclear arms. But if Israel or the United States does strike to prevent Iran from getting nuclear weapons, it will have ample justification to do so. STEVEN R. DAVID  is a professor of political science at Johns Hopkins University.",},
        
        {userID: 18, id: 1018, text: "Bill Keller thoughtfully tempers the worst fears about a nuclear-armed Iran. And he is certainly correct that Iran would be deterred from directly using nuclear weapons because of the threat of retaliation. But he plays down what would likely be the most destabilizing and dangerous impact of a nuclear Iran: Tehran’s use of its arsenal as a protective shield while it expanded power and influence across the region.	Mr. Keller says this “nuclear shield\" would mostly just embolden Iran’s support for subversive proxies like Hezbollah. But with territorial (and other) disputes against nearly all of its neighbors, Iran could also use a nuclear deterrent to try to alter the map of the Middle East. This is not simply an idle hypothetical: If Saddam Hussein had nuclear weapons in the summer of 1990, Kuwait would most likely now be part of Iraq. The United States and its allies cannot allow Iran such a waiver to engage in reckless aggression. Perhaps if that became clear, Iran would finally think twice about proceeding with its nuclear ambitions. STUART GOTTLIEB teaches international security at Columbia University.",},
    ],
		



whyIranShould_article: "" + 
"        Why Iran Should Get the Bomb" +
"        Nuclear Balancing Would Mean Stability" +
"        By Kenneth N. Waltz" +
"        July/August 2012" +
"" +
"        The past several months have witnessed a heated debate over the best way for the United States and Israel to respond to Iran's nuclear activities As the argument has raged, the United States has tightened its already robust sanctions regime against the Islamic Republic, and the European Union announced in January that it will begin an embargo on Iranian oil on July 1. Although the United States, the EU, and Iran have recently returned to the negotiating table, a palpable sense of crisis still looms. It should not. Most U.S., European, and Israeli commentators and policymakers warn that a nucleararmed Iran would be the worst possible outcome of the current standoff. In fact, it would probably be the best possible result: the one most likely to restore stability to the Middle East." +
"" +
"        POWER BEGS TO BE BALANCED" +
"" +
"        The crisis over Iran's nuclear program could end in three different ways. First, diplomacy coupled with serious sanctions could convince Iran to abandon its pursuit of a nuclear weapon. But this outcome isunlikely: the historical record indicates that a country bent on acquiring nuclear weapons can rarely be dissuaded from doing so. Punishing a state through economic sanctions does not inexorably derail itsnuclear program. Take North Korea, which succeeded in building its weapons despite countless rounds of sanctions and UN Security Council resolutions. If Tehran determines that its security depends onpossessing nuclear weapons, sanctions are unlikely to change its mind. In fact, adding still more sanctionsnow could make Iran feel even more vulnerable, giving it still more reason to seek the protection of the" +
"        ultimate deterrent." +
"" +
"        The second possible outcome is that Iran stops short of testing a nuclear weapon but develops a breakoutcapability, the capacity to build and test one quite quickly. Iran would not be the first country to acquire asophisticated nuclear program without building an actual bomb. Japan, for instance, maintains a vastcivilian nuclear infrastructure. Experts believe that it could produce a nuclear weapon on short notice.Such a breakout capability might satisfy the domestic political needs of Iran's rulers by assuring hardliners that they can enjoy all the benefits of having a bomb (such as greater security) without thedownsides (such as international isolation and condemnation). The problem is that a breakout capability" +
"        might not work as intended." +
"" +
"        The United States and its European allies are primarily concerned with weaponization, so they mightaccept a scenario in which Iran stops short of a nuclear weapon. Israel, however, has made it clear that itviews a significant Iranian enrichment capacity alone as an unacceptable threat. It is possible, then, thata verifiable commitment from Iran to stop short of a weapon could appease major Western powers butleave the Israelis unsatisfied. Israel would be less intimidated by a virtual nuclear weapon than it would be by an actual one and therefore would likely continue its risky efforts at subverting Iran's nuclear program through sabotage and assassination -- which could lead Iran to conclude that a breakout capability is an insufficient deterrent, after all, and that only weaponization can provide it with the security it seeks. The third possible outcome of the standoff is that Iran continues its current course and publicly goes nuclear by testing a weapon. U.S. and Israeli officials have declared that outcome unacceptable, arguing that a nuclear Iran is a uniquely terrifying prospect, even an existential threat. Such language is typical of major powers, which have historically gotten riled up whenever another country has begun to develop a nuclear weapon of its own. Yet so far, every time another country has managed to shoulder its way into the nuclear club, the other members have always changed tack and decided to live with it. In fact, by reducing imbalances in military power, new nuclear states generally produce more regional and international stability, not less. Israel's regional nuclear monopoly, which has proved remarkably durable for the past four decades, has long fueled instability in the Middle East. In no other region of the world does a lone, unchecked nuclear state exist. It is Israel's nuclear arsenal, not Iran's desire for one, that has contributed most to the current crisis. Power, after all, begs to be balanced. What is surprising about the Israeli case is that it has taken so long for a potential balancer to emerge." +
"" +
"        Of course, it is easy to understand why Israel wants to remain the sole nuclear power in the region and why it is willing to use force to secure that status. In 1981, Israel bombed Iraq to prevent a challenge to its nuclear monopoly. It did the same to Syria in 2007 and is now considering similar action against Iran. But the very acts that have allowed Israel to maintain its nuclear edge in the short term have prolonged an imbalance that is unsustainable in the long term. Israel's proven ability to strike potential nuclear rivals with impunity has inevitably made its enemies anxious to develop the means to prevent Israel from doing so again. In this way, the current tensions are best viewed not as the early stages of a relatively recent Iranian nuclear crisis but rather as the final stages of a decades-long Middle East nuclear crisis that will end only when a balance of military power is restored." +
"" +
"        UNFOUNDED FEARS" +
"" +
"        One reason the danger of a nuclear Iran has been grossly exaggerated is that the debate surrounding it has been distorted by misplaced worries and fundamental misunderstandings of how states generally behave in the international system. The first prominent concern, which undergirds many others, is that the Iranian regime is innately irrational. Despite a widespread belief to the contrary, Iranian policy is made not by \"mad mullahs\" but by perfectly sane ayatollahs who want to survive just like any other leaders. Although Iran's leaders indulge in inflammatory and hateful rhetoric, they show no propensity for self-destruction. It would be a grave error for policymakers in the United States and Israel to assume otherwise." +
"" +
"        Yet that is precisely what many U.S. and Israeli officials and analysts have done. Portraying Iran as irrational has allowed them to argue that the logic of nuclear deterrence does not apply to the Islamic Republic. If Iran acquired a nuclear weapon, they warn, it would not hesitate to use it in a first strike against Israel, even though doing so would invite massive retaliation and risk destroying everything the Iranian regime holds dear. " +
"" +
"        Although it is impossible to be certain of Iranian intentions, it is far more likely that if Iran desires nuclear weapons, it is for the purpose " +
"        of providing for its own security, not to improve its offensive capabilities (or destroy itself). Iran may be intransigent at the negotiating " +
"        table and defiant in the face of sanctions, but it still acts to secure its own preservation. Iran's leaders did not, for example, attempt to " +
"        close the Strait of Hormuz despite issuing blustery warnings that they might do so after the EU announced its planned oil embargo in January. The " +
"        Iranian regime clearly concluded that it did not want to provoke what would surely have been a swift and devastating American response to such a " +
"        move." +
"" +
"        Nevertheless, even some observers and policymakers who accept that the Iranian regime is rational still worry that a nuclear weapon would embolden it, providing Tehran with a shield that would allow it to act more aggressively and increase its support for terrorism. Some analysts even fear that Iran would directly provide terrorists with nuclear arms. The problem with these concerns is that they contradict the record of every other nuclear weapons state going back to 1945. History shows that when countries acquire the bomb, they feel increasingly vulnerable and become acutely aware that their nuclear weapons make them a potential target in the eyes of major powers. This awareness discourages nuclear states from bold and aggressive action. Maoist China, for example, became much less bellicose after acquiring nuclear weapons in 1964, and India and Pakistan have both become more cautious since going nuclear. There is little reason to believe Iran would break this mold." +
"" +
"        As for the risk of a handoff to terrorists, no country could transfer nuclear weapons without running a high risk of being found out. U.S. surveillance capabilities would pose a serious obstacle, as would the United States' impressive and growing ability to identify the source of fissile material. Moreover, countries can never entirely control or even predict the behavior of the terrorist groups they sponsor. Once a country such as Iran acquires a nuclear capability, it will have every reason to maintain full control over its arsenal. After all, building a bomb is costly and dangerous. It would make little sense to transfer the product of that investment to parties that cannot be trusted or managed." +
"" +
"        Another oft-touted worry is that if Iran obtains the bomb, other states in the region will follow suit, leading to a nuclear arms race in the Middle East. But the nuclear age is now almost 70 years old, and so far, fears of proliferation have proved to be unfounded. Properly defined, the term \"proliferation\" means a rapid and uncontrolled spread. Nothing like that has occurred; in fact, since 1970, there has been a marked slowdown in the emergence of nuclear states. There is no reason to expect that this pattern will change now. Should Iran become the second Middle Eastern nuclear power since 1945, it would hardly signal the start of a landslide. When Israel acquired the bomb in the 1960s, it was at war with many of its neighbors. Its nuclear arms were a much bigger threat to the Arab world than Iran's program is today. If an atomic Israel did not trigger an arms race then, there is no reason a nuclear Iran should now. " +
"" +
"        REST ASSURED" +
"" +
"        In 1991, the historical rivals India and Pakistan signed a treaty agreeing not to target each other's nuclear facilities. They realized that far more worrisome than their adversary's nuclear deterrent was the instability produced by challenges to it. Since then, even in the face of high tensions and risky provocations, the two countries have kept the peace. Israel and Iran would do well to consider this precedent. If Iran goes nuclear, Israel and Iran will deter each other, as nuclear powers always have. There has never been a full-scale war between two nuclear-armed states. Once Iran crosses the nuclear threshold, deterrence will apply, even if the Iranian arsenal is relatively small. No other country in the region will have an incentive to acquire its own nuclear capability, and the current crisis will finally dissipate, leading to a Middle East that is more stable than it is today." +
"" +
"        For that reason, the United States and its allies need not take such pains to prevent the Iranians from developing a nuclear weapon. Diplomacy between Iran and the major powers should continue, because open lines of communication will make the Western countries feel better able to live with a nuclear Iran. But the current sanctions on Iran can be dropped: they primarily harm ordinary Iranians, with little purpose." +
"" +
"        Most important, policymakers and citizens in the Arab world, Europe, Israel, and the United States should take comfort from the fact that history has shown that where nuclear capabilities emerge, so, too, does stability. When it comes to nuclear weapons, now as ever, more may be better. " +
"",



whyIranShould_comments: [

        {userID: 19, id: 2019, text: "I am very surprised by Waltz's assumptions and conclusions in this article. If one were going to argue that Iran should be allowed to develop a nuclear weapon, one should use much better rationale to do so. My initial shock stems from the fact that Mr. Waltz actually seems to believe that Iran is a state just like any other. That they have rationallity and long-term stability in their present, as well as in their future. I would argue that this is not the case at all. There are significant power struggles happening within the country - between political factions, as well as between the Ayatollas and the politicians. In addition to that, the populace is not the contented entity that his article assumes. The reaction after the elections a couple years ago, along with the response of the regime underscore this. In addition, Iran has been very willing in the past - and possibly in the present - to make use of terrorist organizations to do their dirty work. Iran has worked through and with both Hamas and Hezbollah. Disavowal of these types of activities have been long in coming, did I miss them? Or are we still waiting? Ah yes, still waiting. The idea that a handoff of nukes to these organizations would be known in time, or not done because the weapons are expensive is fantasy. Iran doesn't play by those rules. Waltz's assertion that countries attaining nuclear capability tend to reduce imbalances in military power is specious, seeing as the other countries joining the nuclear club have NOT been Iran. Lumping this country with others from the past is a bit like saying that a strain of bird flu with mutations is bird flu like we have encountered elsewhere in the world. Iran is a country like other countries, yet Iran with nuclear weapons is an unknown entity that has in the past threatened various European powers, the United States, and Israel. Acting as though the country will not use these weapons if they are attained is whistling past the graveyard. As for the balance of power in the region, despite the fact that the weapons in Turkey are NATO nukes, there is a balancing aspect to their control of them. Turkey, although not aligned with Iran as Syria is, has an Islamist government which has a role in NATO as well as at the UN. The country has influence with the US and the world through these ties. And finally, Iran is a state protected by Russia - and to a lesser extent China - on the world stage. Both these countries have nuclear weapons that can be considered to balance Israel's arsenal. I fear Mr. Waltz is mistaken in his assumptions as well as his conclusion that Iran should not be disallowed from attaining nuclear weapons. He seems to have a very rosey view of the matter.",},

        {userID: 20, id: 2020, text: "I can’t agree with this argument because of two reasons. First, this idea regards the handoff to terrorists as improbable. But not a few of them are much eager to acquire the atomic bombs because it enables them to wound the \"Trunk\". The threat of nuclear proliferation originates in the simplicity of weaponizing. Anyone who gets the high enriched uranium can make the bombs. Imagine the people in China or Russia who resort to the suitcase bomb for protesting against the regime. Loose nuclear management triggers the world unacceptable vulnerability. Second, this notice admit the possession of nuclear weapons politically. But the hypotheses of NPT regime demand that no country can develop nuclear weapons because it is a necessary evil. The status is dramatically different, political measure from evil. This concession denies NPT regime, which is unprecedented. Finally, power begs to be balanced or to avoid massive disaster; that is the question. Accounting for the lack of Israel’s geographical depth, the current status is balancing. Even if rebalancing is required, we should seek another way. Japan decides not to develop nuclear weapons because it knows that isolationism is not the way to prosperity. Isolationism stiffens the foreign policy unpredictably, as Japan once experienced in 1930s. I’d like to say to Iranian people; Take handle while you can choose your course.",},

        {userID: 21, id: 2021, text: "What about the balance of having Islamic nations totaling 300 million Arabs, 85 million Turks, 75 million Persians, all of whom are opposed to Israel's 1.5 million Arabs and 5 million Jews? Israel has defended herself well, but she does not talk about wiping out any Islamic nation as they freely threaten to wipe out Israel. Israel is the target now because Islamic nations have the power of oil, but are still in flux. As they acquire physical power, their focus will change to America, which is the great Western power. It was America, not Israel, that overthrew Mohammad Mosaddegh, the democratically elected leader of Iran and replaced him with the despotic Shah, the leader the present Iranian regime overthrew. It would be as smart of us to allow Iran to acquire the bomb as it was of Europe and America to allow Hitler to rearm Germany. And this time round, not even England will be much help to America. (She was never much help to the Jews).",},

        {userID: 22, id: 2022, text: "Mr. Waltz is indeed a genius when it comes to \"appeasement and surrender\". While Adolf would have been proud of him, Churchill would have had Waltz hanged for high treason. Based on his principles enunciated in this article, the successful outcome of the Manhattan Project should have been revealed to the Axis Powers (those that were still standing) rather than used to put an end to WW2. Moral equivalence, especially where Israel is involved, is just another way to surrender to Islamists. Offering six million Jewish lives as payment for Muslim terrorists' blackmail seems to be Mr. Waltz's eminent recommendation to the free world. As it happens, we are not ready or willing to surrender to anyone – least of all to our mortal enemies. Different from cowardly appeasers, Americans will never forget 9/11. Never! Maybe this should be the title of the next article (on the subject) to be published by Foreign Affairs magazine. Or maybe not.",},

        {userID: 23, id: 2023, text: "Bottom line gentlemen. The world will never have peace, until the 2nd coming of Jesus Christ. If Iran decides to bomb Israel they will be fighting the Lord Himself. Not what I would want to do by any means. The Hand of the Lord holds, in its midst, tiny Israel. The world is heading quickly into the Tribulation Period and then the end.",},

        {userID: 24, id: 2024, text: "There is something of an appeasement, \"peace at any price\" core to Kenneth Waltz’s shocking assertion that we should just let Iran build nukes. Yes, the road to stopping Iran’s nuclear ambitions will not be easy and it will come at a price in human lives and financial resources. However, Waltz’s suggestion of a Nuclear Shiite Iran – one with a regime that believes in a better life after death – creating stability in the Middle East that is simply ridiculous on the surface and then considerably less funny when one truly digs into the issue. There’s no point in comparing Iran with the China/India/Pakistan situation because they are completely different. Yes, all have funded terrorist organizations to varying degrees -- largely for political and financial purposes rather than ideological ones -- and Pakistan still looms as a far greater danger than either China or India – and a Pakistani-Iranian alliance would indeed be a substantial danger. But at the moment the new “Persian Empire\" as the Iranian Mullahs frequently like to refer to themselves (although not in public forums) is determined to export its radical views of Islam not only throughout the region but throughout the world. To even attempt to compare a nuclear-armed Iran vs. Israel scenario as stabilizing is absurd. Israel built a bomb because it had seven million citizens facing some HUNDRED MILLION in hostile Islamic countries. Moreover, even setting Israel aside, how does Waltz explain what the Saudis and their Sunni allies will do? And we must make no mistake that the Shiite-Sunni rivalry is every bit as dangerous as Iran’s designs on Israel. Let’s make this simple: Can you trust a country that sends assassins to kill journalists in the Netherlands after they wrote cartoons about Islam? That’s how Waltz defines stability?",},

        {userID: 25, id: 2025, text: "I have to admire Mr.Waltz's courage to write this article which would be helpful to achive world peace. The world needs a good geopolitical balance for lasting peace. I have to also congratulate the editor for accepting the article for publication.",},
        
        {userID: 26, id: 2026, text: "Although Israel has been at the fore of nuclear deterrence in Iran, this article only captured half, or perhaps two thirds, of the power-struggle revolving around this issue in the Middle East. Saudi Arabia has also made clear that it does not want to see a nuclear armed Iran emerge, and that in such a case, it would seek nuclear weapons as well. The author of this article makes an interesting case, regarding the balancing affect of nuclear weapons, yet he neglects to note that despite acquiring nuclear weapons, India and Pakistan have not ceased hostilities (i.e. Mumbai massacre), or the demilitarization of Kashmir. North Korea, as well, has taken lethal action against the South, despite their MAD deterrence. While these instances are far from full fledged war, they are certainly worth consideration, though it is true, perhaps MAD did prevent the outbreak of further bloodshed. However, with a steady flow of blood already flowing in the Middle East, such an effect is more doubtable. Irans proxy wars, being waged in Afghanistan, Iraq, and Syria, as well, would, indeed, only be emboldened by a nuclear armed Iran. Such an accomplishment would serve as a certain propaganda/morale feat, while giving the Iranian Gov.'t a certain level of insurance that overt, exterior retaliation against it could be avoided for its proxy efforts in regional countries. With a Sunni-Shia conflict unfolding in Syria, Saudi Arabia, and other gulf states, should have been taken into consideration, in this article, along with Israel.",},
        
        {userID: 27, id: 2027, text: "I think, too, that is finally a great example of voice of reason, which was needed to everyone of us. Kenneth Waltz pointed out main concerns and gave an exhaustive handmaiden of why we should not attack Iran and try to hold it back from getting a nuclear bomb. After all, I think his voice unfortunately will mingle with the crowd...",},
        
        {userID: 28, id: 2028, text: "An interesting outline of a view very different from my own. I wonder if the author remembers Ahmadinejad's letter to Angela Merkel where he applauded Germany for their particular efforts with the Jewish people during the last of the great wars? Much 'rational' argument was passed back and forth  in the days before the war to assess or play down the danger of Hitler. Most notably was Prime Minister of the UK, Mr Chamberlain's peace negotiations with Hitler. The ruling Labour Party of my own little Scandinavian country didn't think there were any danger neither, and we therefore had practically no defences when Hitler struck. Where rationale is influenced to such a degree by beliefs, that self-destruction gives you advancement in Heaven's halls for eternity, pure logic looses its bite. I hope it's not too hard to remember across the Atlantic that hatred against Jews has found several seemingly irrational, but very tangible outlets, such as the Holocaust. In spite of a well formulated view-point, I find no trace of such understanding in the author. I would hate to live in a world where millions of Jews or people of any other race needed to pay with their lives for our academic experiments. On the other hand, I agree with the author that a hard line sometimes begets a hard response. But this works, and should work both ways. Like some of the other commenters have pointed out, the article does not explore the responses of Saudi Arabia and a whole host of other countries in the region. Nor does it explore potential global alliances between a new breed of nuclear superpowers, which would render their combined powers anything but regional. Hence, the article feels like work-in-progress rather than a completed argument. Many thanks.",},

    ],
		


israelSharpens_article: "" + 
"" +
"        Israeli Sharpens Call for United States to Set Iran Trigger" +
"        By DAVID E. SANGER and ISABEL KERSHNER" +
"" +
"        WASHINGTON — Prime Minister Benjamin Netanyahu of Israel inserted himself into the most contentious foreign policy issue of the American presidential campaign on Tuesday, criticizing the Obama administration for refusing to set clear \"red lines\" on Iran’s nuclear progress that would prompt the United States to undertake a military strike. As a result, he said, the administration has no \"moral right\" to restrain Israel from taking military action of its own." +
"" +
"        Mr. Netanyahu’s unusually harsh public comments about Israel’s most important ally, which closely track what he has reportedly said in vivid terms to American officials visiting Jerusalem, laid bare the tension between him and President Obama over how to handle Iran. They also suggested that he is willing to use the pressure of the presidential election to try to force Mr. Obama to commit to attack Iran under certain conditions." +
"" +
"        He appeared to be responding to a weekend statement by Secretary of State Hillary Rodham Clinton that the United States was \"not setting deadlines\" beyond which it would turn to a military solution." +
"" +
"        Mr. Netanyahu, speaking at a news conference in Jerusalem, said, \"Those in the international community who refuse to put red lines before Iran don’t have a moral right to place a red light before Israel.\"" +
"" +
"        In another sign of tensions, the Israeli Embassy in Washington said late Tuesday that the Obama administration had declined a request from Mr. Netanyahu’s office for a meeting with Mr. Obama when the Israeli leader attends the United Nations General Assembly this month. The Obama administration said the decision was due to a scheduling problem and had been conveyed to Israel long ago." +
"" +
"        On Tuesday night, Mr. Obama called Mr. Netanyahu to try to calm the situation. The two talked for a full hour, hashing through the Iran confrontation and their misunderstandings." +
"" +
"        \"President Obama and Prime Minister Netanyahu reaffirmed that they are united in their determination to prevent Iran from obtaining a nuclear weapon, and agreed to continue their close consultations going forward,\" the White House said in a statement after the phone call." +
"        The White House also tried to tamp down controversy over the request for a meeting, saying that after a possible New York encounter was ruled out, Mr. Netanyahu did not request a meeting in Washington. \"Contrary to reports in the press, there was never a request for Prime Minister Netanyahu to meet with President Obama in Washington, nor was a request for a meeting ever denied,\" the statement said." +
"" +
"        The United States says it has no evidence that Iranian leaders have made a final decision to build a bomb. However, the International Atomic Energy Agency’s latest report says the country has amassed a stockpile of low- and medium-enriched uranium that, with further enrichment, could fuel as many as six nuclear weapons." +
"" +
"        The United States concluded several years ago that Iran had suspended its nuclear weapons development program at the end of 2003, though there has been evidence of sporadic work since. The Israelis say Iran is quietly reconstituting a much larger effort." +
"        In demanding that Mr. Obama effectively issue an ultimatum to Iran, Mr. Netanyahu appeared to be making maximum use of his political leverage at a time when Mr. Obama’s Republican opponent, Mitt Romney, has sought to make an issue of what Mr. Romney says is the administration’s lack of support for Israel." +
"" +
"        It is not clear what level of development in Iran’s nuclear program would constitute a \"red line\" in Israeli eyes. Dore Gold, president of the Jerusalem Center for Public Affairs, a research institute, and a former Israeli ambassador to the United Nations, said in an interview last week, \"It is very important to draw a line about the quantities of enriched uranium and the levels of enrichment.\"" +
"" +
"        One option that has been widely discussed among experts advising the United States government is capping Iran’s uranium enrichment at a reactor-grade level. Also, Iran would be permitted to stockpile no more than 1,764 pounds of that uranium, less than is required, if further enriched, to make a single bomb." +
"" +
"        Mr. Netanyahu, who is highly attuned to American politics, seemed to be using his comments to pressure Mr. Obama to specify at which point the United States would be prepared to take military action against Iran, perhaps at the United Nations General Assembly opening this month." +
"" +
"        The Israeli ambassador to the United States, Michael B. Oren, echoed Mr. Netanyahu in an interview in Washington on Monday night and said the Israeli leadership wanted Mr. Obama and the leaders of other nations to agree on clear limits for Iran." +
"        \"We know that the Iranians see red,\" Mr. Oren said. \"We know they can discern the color red. We know that the redder the line, the lesser the chance that they will pass it.\"" +
"" +
"        Mrs. Clinton publicly rejected that approach over the weekend. In an interview with Bloomberg Radio, she avoided discussion of Iran’s stockpile and said, \"We’re not setting deadlines\" for military action. It was that statement that appeared to have set off Mr. Netanyahu." +
"" +
"        Mr. Obama has repeatedly argued — with the support of some leading Israeli officials — that the United States and Israel have closer security cooperation now than at any other point in history. The United States provided much of the Iron Dome missile defense system for Israel, and for the past five years the two countries worked closely on a major covert operation against Iran called \"Olympic Games,\" an effort to sabotage Iran’s enrichment capability with cyberattacks." +
"" +
"        But Mr. Obama has stopped well short of saying he would prevent Iran from developing the capability to produce a bomb. He has said only that he would not allow Iran to obtain a weapon; Mr. Netanyahu has said that is not enough." +
"        Depending on how one defines the term, Mr. Obama’s aides and former aides acknowledge that Iran may already have that capability. It possesses the fuel and the knowledge to make a weapon, but that would take months or years, and Mr. Obama has argued that allows \"time and space\" for a negotiated solution." +
"" +
"        Mr. Romney had no immediate comment about Mr. Netanyahu’s challenge to Mr. Obama, and one of his informal advisers on the Middle East said, \"It’s probably better at this point to let Netanyahu make the point because it’s more powerful that way.\" The adviser said he was not authorized to speak on the record." +
"" +
"        But the Netanyahu comments play right to the Republican nominee’s critique of Mr. Obama. On \"Meet the Press\" on Sunday, Mr. Romney declared that the progress of Iran’s nuclear program was Mr. Obama’s \"greatest failure\" in foreign policy." +
"" +
"        \"The president hasn’t drawn us any further away from a nuclear Iran,\" he said." +
"" +
"        There is little doubt that the Iranian effort has progressed. When Mr. Obama took office, Iran had produced enough fuel to make, if enriched further, about one bomb, compared with five or six in the International Atomic Energy Agency’s current calculation." +
"" +
"        But Mr. Romney’s proposals have also steered clear of describing with any precision how far Iran could go before he would use force to stop its program. Like Mr. Obama, he has not said how much progress he would allow Iran to make toward a weapons capability before he authorized a strike." +
"        Instead, he has insisted that Mr. Obama was late to the task of placing \"crippling sanctions\" on Iran. Yet those sanctions have begun to strike at the heart of Iran’s greatest source of national revenue — oil sales — something that the Bush administration shied away from." +
"" +
"        Mr. Netanyahu has been dismissive of sanctions. They are an indirect form of pressure, he has argued, and have not forced Iran’s supreme leader, Ayatollah Ali Khamenei, to scale back the country’s nuclear program." +
"" +
"        In recent days, the Israelis had appeared to be dialing down the pressure on Washington, with the Israeli news media reporting that Ehud Barak, the defense minister, was rethinking the wisdom of an attack in the coming months. There was speculation that Israeli officials feared that the long-term jeopardy to Israel’s relationship with Washington was not worth the short-term gain of setting back, but probably not destroying, Iran’s capability." +
"" +
"        A number of American officials, in trips to Israel, have argued that an Israeli attack would only drive the nuclear program underground and most likely result in the expulsion of international inspectors, who are the best gauge of the program’s progress." +
"" +
"        But Mr. Netanyahu revived the tough talk of the past few months and the message that time is running out for Israel." +
"" +
"        \"So far, we can say with certainty that diplomacy and sanctions haven’t worked. The sanctions have hurt the Iranian economy, but they haven’t stopped the Iranian nuclear program,\" Mr. Netanyahu said, adding, \"The fact is that every day that passes, Iran gets closer and closer to nuclear bombs.\"" +
"" +
"        David E. Sanger reported from Washington, and Isabel Kershner from Jerusalem. Elisabeth Bumiller and Peter Baker contributed reporting from Washington, and Rick Gladstone from New York." +
"",







israelSharpens_comments:  [

        {userID: 30, id: 3030, text: "Netanyahu really is intent on helping his friend, Romney, win the White House. In so doing, he is intentionally interfering in domestic U.S. politics--a wholly inappropriate act for a foreign leader, especially one which deems itself an \"ally\". If Netanyahu (ethically compromised already as the record show) and Romney (a man with so little faith in America that he deposits large sums of money off shore) feel that their perception of Israel's security (which is all it is--a perception) trumps the larger issue of U.S. and global security, I'll trust the leader (Obama) who has neither of these marks against him and who has already amply demonstrated that he is willing and able to take the necessary steps when the time is right.",},
        
        {userID: 31, id: 3031, text: "What is most troubling about all this from an American's perspective is that our leaders feel so compelled to repeat that our bond with Israel is \"unbreakable.\" It's as though some invisible handshake of history has determined that the United States' and Israel's interests will forever remain one in the same. There is no argument as anti-realist as this. Israel's outlook under Netanyahu mirror the infantile \"clash of civilizations\" approach of the Bush administration, which were disastrous for U.S. interests and credibility. Our new, thoughtful president understands this, and he is attempting mold a foreign policy agenda in which nuance, cross-cultural dialogue and diplomacy are of first resort. It's the right way to go for out country's sake, and if Israel would like to play an allied role, it can be very useful. But if Israel would rather play out its pre-Cold War delusions, then our \"sacred bond\" can and should be broken.",},

        {userID: 32, id: 3032, text: "Although I have always been a supporter of Israel, I find Netanyahu repulsive, the Likud utterly uninterested in the two state solution, and, I might point out, in charge of a nation with hundreds of its own nuclear weapons. Yes, the Iran government is bad both for its own people and for the region. It is not, however, crazy. Any attempted attack by Iran on Israel would lead to a massive retaliation which would leave that nation in ruins. Sadly, there is no resolution to this conflict in the short term. Over the long haul, with patience and diplomacy, we can anticipate a collapse of the Iranian regime much in the same way that the corrupt and incompetent Soviet regime fell. There are no swift fixes.",},
        
        {userID: 33, id: 3033, text: "Netanyahu is war-monger who would like nothing better than to bomb Iran and draw the United States into another bloody war with an uncertain outcome. The President and Secretary Clinton are right in refusing to commit to a \"bright line\" that would inevitably precipitate a confrontation, and war.  Netanyahu's secondary agenda is to force the U.S. to commit to that bright line, so that the U.S. could not complain when Iran inevitably ignored the warning and Israel bombed Iran. Either way, we lose. Israel rightly fears Iranian nuclear capability, but we have no obligation to follow Israel's preferred plan -- bombing Iran -- for avoiding that outcome. The President's policies, which succeeded in Libya, require international cooperation, diplomacy and, where need be, strategic military intervention. Unilateral bombing is not among those choices and would not achieve the goal -- to stop Iran, without starting a bonfire in the Mid-East. Netanyahu's third agenda, moreover, is to help elect Romney, who like Bush will allow Israel to do whatever it wants to do. We had two Israeli bloody invasions -- of Lebanon and Gaza -- during the Bush administration, -- neither of which accomplished anything but bloodshed. For all these reasons, Obama should be re-elected and Netanyahu should be ignored.",},
        
        {userID: 34, id: 3034, text: "Regardless of the Romney-Netanyahu friendship or even the wisdom of an attack on Iran, an objective look at the situation reveals two facts which defenders of Secretary Clinton must refute: No evidence exists that the sanctions regime, as harmful to the Iranian economy as it may be, has deterred the Iranians from pushing forward with their enrichment program in which they continue to enrich uranium at levels beyond that unnecessary for medical research. Second, by continuing to both publicly announce that Israel will be unable to effectively damage the Iranian program; that Israel should not unilaterally attack; that sanctions are working and that no red lines exist in U.S. policy, the U.S. continues to signal Iran that the U.S. will not take military action. Assuming that Israel should rely on the President 's words opposing containment, Secretary Clinton's remarks nonetheless may be mis-read by the mullahs and.or the revolutionary guard (which may be making policy) as a reluctance by the U.S. to take any military action -- ever. The failure to take any action to support the Green revolution whatever in 2009 would confirm the Iranian perspective. The burden on those who agree with the President's statement that the U.S. will not countenance a nuclear-armed Iran is to explain how Secretary Clinton's comments advance that policy as opposed to convincing the Israelis and Iranians that the U.S. will be reluctant to take any military action.",},
        
        {userID: 35, id: 3035, text: "Voters should heed this story as yet another wake-up call on the eve of another important presidential election. Mitt Romney has ZERO foreign policy experience, while President Obama has been largely successful on foreign policy in his first term in office. The last thing the U.S. and the world at large needs is another full scale war in the Middle East. Netanyahoo apparently hasn't gotten the memo and fails to recognize that more violence and discontent will be more threatening to Israeli security than deterrence. ",},

        {userID: 36, id: 3036, text: "Why is the conservative Prime Minister of Israel intervening in a major American election by throwing red meat to the Republicans? This is just so very transparent. For a recipient nation to treat its one major ally in this manner is disgraceful, tacky, uncalled-for.  It makes me wonder if Netanjahu's Israel is truly a friend of America, and American democracy. ",},

        {userID: 37, id: 3037, text: "The trouble with most folks isn't so much their ignorance--it's that they know so much that ain't so. Israel is the homeland of the Jewish people--an ancient nation that is one of the few remaining from its time that is a nationality with a common national religion. As such, Israel is concerned with, and charged with, the protection of Jews around the world.  And Iran HAS been attacking Jews around the world for many years now. Bombing Jewish centers in South America and Europe in addition to funding and arming terrorists that have been attacking Israel directly are just the tip of the iceberg. Israel and Iran are at war and have been for some time. The actions of the Obama administration are consistent with a policy that is tolerant of a nuclear Iran--despite any protestations to the contrary. Refusing to create any red lines is indicative of this reality. If Obama truly means to use the military to prevent a nuclear Iran, it would have no trouble setting a deadline based on US intelligence assessments. Netanyahu understands that Obama has no intention of supporting a military attack against Iran. The problem is, Obama's telling Iran the same thing.  Israel has fought many proxy wars on behalf of the US over the last several decades at a tremendous human cost. So, a thank you to Israel is more appropriate than the ignorant vitriol displayed here. And all that US technology Israel gets? They improve it and share the improvements with the US. You're welcome for that, too.",},
        
        {userID: 38, id: 3038, text: "This would be a big enough war (if we are dragged in ) that I would hope this country votes first about it before entering it.",},
        
        {userID: 39, id: 3039, text: "I am wondering if perhaps Prime Minister Netanyahu watched a replay of the Democratic National Convention. If so, he saw, or at least heard, the handwriting on the wall. The numbers of those who opposed the changes in the wording of the party's platform startled me, and if the prime minister heard the nays perhaps he was startled, too. If he were not, well, he should have been. Those thundering nays constitute, to the best of my knowledge, the first public outcry against the corrosive influence of the Israel-first lobby in the political life of this country, and, mirabile dictu, that outcry was broadcast not only to the entire nation but to the entire world. Perhaps the prime minister has concluded that the days of Israeli suzerainty are drawing to a close and that he must act quickly or not at all. More than half a century has elapsed now since I began to write to my elected representatives in opposition to our support for Israel. Neither crystal ball nor special perception was required to see that uncritical support for Israel was not only immoral but dangerous, yet for five decades and more those of us who held such opinions were simply not heard. Times have changed, though, thanks in large measure to Walt and Mearsheimer, and once I recovered from the shock of hearing all those thundering nays from the Democratic delegates in Charlotte, I began to think for the very first time that, yes, we are, in fact, going to win this battle after all.",},
        
        {userID: 40, id: 3040, text: "Everyone seems to be forgetting that supporting the only true ally and true democracy in the region should be a strong goal of our administration. I was watching 9/11 footage today from the day it occurred with Palestinians dancing in the street passing out candy, while Israel tried to send over search and rescue groups and aid. Giving a radical country nuclear missiles causes a major problem for us in the region as well. We do send them tax money in the form of different programs and military aid but we also send money to Pakistan and various South American countries who do not like the US at all. If things get out of hand in the Middle East it would be good to have a staging ground for attacks such as Israel. We are not in a position to ostracize one of our only friends in the world.",},

        {userID: 41, id: 3041, text: "As pointed out in this piece, Netanyahu does not even have solid support in Israel for striking Iran. The U.S. is a steadfast ally of Israel, and would not hesitate to intervene should it's own intelligence - underpinned by the IAEA and Israel itself - point to Iran on a \"deliberate\" and \"unalterable\" path to developing a nuclear device. Iran knows this, and is not about to enter a suicide pact, especially with their interests threatened in Syria and sanctions forcing them to scramble to sell oil and keep their beleaguered middle-class from taking to the streets once again. The Obama administration has shown a steady hand in orchestrating a measured foreign policy in a manner that strengthens our status on the world scene - and has stated plainly that we will not tolerate a nuclear armed Iran. Bibi would be better served working in tandem with Secretary Clinton, and not trying to impose his hard line on a U.S. goverment that's a repeatedly proven benefactor and protector. Coming in the midst of a presidental campaign makes his remarks seem more political posturing than a genuine declaration of an immediate existential threat. The last thing we need is a reprise of the Bush/Cheney/Rumsfeld/Wolfowitz/Rice disastors. Let's stay calm, remain vigilent, and strive for reason and mutual trust when it comes to handling the admittedly complex situation in Iran.",},
  
        {userID: 42, id: 3042, text: "At what point did the United States hand off its foreign policy to Israel? At what point does Netanyahu decide when to send American men and women to fight, yet, another war? Is there another country in the world who so arrogantly asks another nation to do it's bidding? I for one, will not agree, or allow my conscience to be dictated by a blustery sable-rattling politician for whom I, as an American citizen do not have to answer to. This, my friends, is a true definition of Chutzpah. Mr. Netanyahu, go fight your own war, America is tired of demonstrating power and violence on your behalf.",},
  
        {userID: 43, id: 3043, text: "No, the sanctions haven't worked and there's no indication that they will work as long as there continues to be a strong international demand for Iran's crude. So, under the circumstances, I can't fault Israel for taking whatever actions it deems necessary. If Israel fails to act then I think that it's likely that Iran will obtain nuclear weapons. This will then prompt other countries in the region, including Saudi Arabia, to also want nuclear weapons - thus making the Middle East a more dangerous place.",},
  
        {userID: 44, id: 3044, text: "Your lack of sensitivity to the incredibly difficult dilemmas facing Israel as Iran gets closer to its nuclear goal is shocking. No one suggests that there are easy answers to the challenge. It would have been helpful for The Times at least to acknowledge Israeli concerns: That diplomacy shows no signs of working and is just the most recent Iranian stalling tactic. That Iran is so very close to embedding its nuclear facilities underground, creating a “zone of immunity\" from attack, that Israel has to worry how much time is left. That there is a degree of uncertainty in Israel about the United States’ willingness to take military action against Iran if sanctions do not do the trick. Israel is our ally, with existential dangers facing it if Iran should gain a weapon. Putting oneself in Israel’s place should be the first order of business in trying to understand and comment on the situation. Unfortunately, this perspective was completely absent from your editorial. ABRAHAM H. FOXMAN National Director Anti-Defamation League New York, Aug. 14, 2012",},
  
        {userID: 45, id: 3045, text: "I fervently hope that President Obama will have the courage to continue pressing for diplomatic efforts rather than bellicose rants to address the issue of Iran’s nuclear program. For Israel to insist on its right to destroy Iran’s nuclear research while it holds a purported nuclear arsenal is the height of arrogance, as is its assumption that the United States will be obliged to follow meekly along. We do not need to blunder into another war.",},
  
        {userID: 46, id: 3046, text: "Your editorial suggests that the Israeli prime minister needs to table the military option and give negotiations more time because there is “no proof that Iran is at the point of producing a weapon.\" Unfortunately, you fail to provide any evidence that negotiations have any hope of succeeding. Even while the sanctions have dramatically decreased Iran’s ability to export oil, the Iranian regime has done a masterful job of dragging out the negotiations while not showing any signs of slowing down the enrichment process or any willingness to compromise. Furthermore, Iran continues to call explicitly for Israel’s destruction. If you are going to denounce the Israeli government over its willingness to use the military option, you will soon have to come up with a more practical alternative than giving the negotiations more time.",},

],
};


var http = require('http'),
    fs = require('fs'),
    path = require('path'),
    _ = require('underscore');

var stream = fs.createWriteStream("/home/m/events."+Date.now()+".txt");

function storeEvent(event){
    stream.write(JSON.stringify(event)+"\n");
}

function DataStoreFactory(oldEvents) {
    var events = [];

    function makeEventSelector(timestampNanos) {
        return function(event) {
            var isNewEnough = event.t >= timestampNanos;
            console.log("? " + JSON.stringify(event) + " " + timestampNanos + " " + isNewEnough);
            return isNewEnough;
        }
    }

    function getEventsSince(serverTimestampMillis) {
        return events.filter(makeEventSelector(1000*1000* serverTimestampMillis));
    }

    function addEvents(newEvents) {
        if (!newEvents.length) {
            console.error('bad events');
        }
        for (var i = 0; i < newEvents.length; i++) {
            events.push(newEvents[i]);
            storeEvent(newEvents[i]);
        }
    }

    // init
    for (var i = 0; i < oldEvents.length; i++) {
        events.push(oldEvents[i]);
    }

    return {
        addEvents: addEvents,
        getEventsSince: getEventsSince,
    };
}


// Read stdin, parse as JSON, and use as oldEvents
process.stdin.resume();
process.stdin.setEncoding('utf8');

// data store
var ds;

var allStdin = "";
process.stdin.on('data', function (chunk) {
      //process.stdout.write('data: ' + chunk);
      allStdin += chunk;
});

// load old events from disk
var oldEvents = [];
process.stdin.on('end', function () {
     var lines = allStdin.split("\n");
     for (var i = 0; i < lines.length; i++) {
         try {
             console.log("a: " + lines[i]);
             oldEvents.push(JSON.parse(lines[i]));
         } catch (err) {
             console.error( "bad line. got: " + lines[i]);
         }
     }
     ds = DataStoreFactory(oldEvents);

     // try it
     allEvents = ds.getEventsSince(1349491010997);
     console.dir(allEvents);
});

    var getNanoseconds = (function() {
        var counter = 0;
        var currentMillisecond = Date.now();
        return function() {
            var now = Date.now();
            if (now !== currentMillisecond) { 
                currentMillisecond = now;
                counter = 0;
            }
            if (counter >= 999999) {
                counter = 999999;
            }
            return now*1000*1000 +""+ counter++;
        };
    })();

    function makeTimestamp() {
        return getNanoseconds();
    }

function getTimestamp() {
    // This timestamp will be used by the client to compute an
    // offset.
    // The system uses microseconds to enforce per-user uniqueness 
    // of timestamps. (which gives an unambiguous order-of-events)
    // These values will be fudged when we generate events.. the
    // client may keep a counter, which will increment every time
    // it tries to create a new event during the same millisecond
    // it created another event. That counter is reset if the
    // millisecond has changed since the last event was created.
    // (so usually the value will end in 000.
    return Date.now();
}

function addTimeStamp(responseObject) {
    return _.extend(responseObject, {serverTime: getTimestamp()});
}


function collectPost(req, res, success) {
    if(req.method == 'POST') {
        var body = '';
        req.on('data', function (data) {
            body += data;
         //  if(body.length > 1e6) // FLOOD ATTACK OR FAULTY CLIENT, NUKE req
         //  {
         //       req.connection.destroy();
         //  }
        });
        req.on('end', function () { 
            var json = JSON.parse(body);
            success(json);
        });
    }
}

function makeHash(ary) {
    return _.object(ary, ary.map(function(){return 1;}));
}


ds = DataStoreFactory([]);

/*
ds.addEvents([{t: makeTimestamp(), type: "p_stimulus", text: articles.nuclearMullah_article}]);
ds.addEvents(articles.nuclearMullah_comments.map(function(x) {
    return _.extend({t: makeTimestamp(), type: "p_comment"}, x);
}));
*/

// Configure our HTTP server to respond with Hello World to all requests.
var server = http.createServer(function (req, res) {

    // start server with ds in scope.
    var routes = {
        "/v1/syncEvents" : function(req, res) {

            console.log('url',req.url);
            collectPost(req, res, function(data) {

                var events = data.events;
                if (events && events.length) {
                    // Add timestamps
                    events = events.map(function(x) {x.t = makeTimestamp(); return x;});
                    ds.addEvents(events);
                }

                var result =  addTimeStamp({
                    received: (events && events.length) || 0,
                });
                var types_to_return = data.types_to_return;
                if (types_to_return) {
                    console.log('types',types_to_return);
                    types_to_return = makeHash(types_to_return);
                    var evs = _.filter(ds.getEventsSince(data.previousServerTimeMillis), function(x) {
                        // "p_comment", etc
                        return !!types_to_return[x.type];
                    });
                    result.newEvents = evs;
                }
                
                res.end(JSON.stringify(result));
            });
        },
        "/v1/getEvents" : function(req, res) { 
            console.log(req.url);
            collectPost(req, res, function(data) {
                var result = JSON.stringify(ds.getEventsSince(data.previousServerTimeMillis));
                console.log(result);
                req.end(result);
            });
        },
    };

    var parts = req.url.split("?");
    var basepath = parts[0];
    var queryParams = (parts.length >= 2) ? parts[1].split("&") : [];

    if (routes[basepath]) {
        res.writeHead(200, {
            'Content-Type': 'application/json',
            'Cache-Control': 'no-cache',
            'Connection': 'keep-alive',
        //    'Access-Control-Allow-Origin': '*',
        //    'Access-Control-Allow-Credentials': 'true'
        });

        // Run the route handler
        routes[basepath](req, res);

    } else {

        // try to serve a static file
        var filePath = './static_iran_sample';
        if (req.url === '/')
            filePath += '/index.html';
        else 
            filePath += req.url;
             
        var extname = path.extname(filePath);
        var contentType = 'text/html';
        switch (extname) {
            case '.js':
                contentType = 'text/javascript';
                break;
            case '.css':
                contentType = 'text/css';
                break;
        }
         
        fs.exists(filePath, function(exists) {
            if (exists) {
                fs.readFile(filePath, function(error, content) {
                    if (error) {
                        res.writeHead(404);
                        res.end('{ "status": 404}');
                    }
                    else {
                        res.writeHead(200, { 'Content-Type': contentType });
                        res.end(content, 'utf-8');
                    }
                });
            } else {
                res.writeHead(404);
                res.end('{ "status": 404}');
            }
        });
    }
});

server.listen(8000);
console.log('started');
