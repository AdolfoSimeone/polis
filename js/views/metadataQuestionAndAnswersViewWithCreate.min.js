define(["models/metadataAnswer","views/metadataAnswerViewWithDelete","views/metadataQuestionAndAnswersView"],function(e,t,n){return n.extend({name:"metadataQuestionAndAnswersViewWithCreate",itemView:t,events:{"blur .add_answer_form":"hideAddAnswerForm"},deleteQuestion:function(){this.model.destroy()},showAddAnswerForm:function(e){this.formActive=!0,this.render()},hideAddAnswerForm:function(t){var n=this,r=$(t.target).data("action");this.serialize(function(t,r){if(t.answerInput&&t.answerInput.length){var i=n.model.get("zid"),s={zid:i,pmqid:n.model.get("pmqid"),value:t.answerInput},o=new e(s);o.save().then(function(){n.collection.fetch({data:$.param({zid:i,pmqid:n.model.get("pmqid")}),processData:!0}),o.fetch(),r()},function(){r(),alert("failed")})}n.formActive=!1,n.render()})},allowCreate:!0,allowDelete:!0})});
